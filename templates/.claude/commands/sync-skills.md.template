---
name: sync-skills
description: Sync all toolkit-managed files from templates
version: 2.0.0
---

# /sync-skills

Syncs all toolkit-managed files to the current workspace from template sources.

## Usage

```bash
/sync-skills [--dry-run] [--skills-only]
```

## Options

| Option | Description |
|--------|-------------|
| `--dry-run` | Show what would be updated without making changes |
| `--skills-only` | Only sync skill scripts and command docs (legacy behavior) |

## What It Syncs

### Always Overwritten (toolkit-managed)

| File | Source |
|------|--------|
| `.claude/skills/*` | Skill scripts from templates |
| `.claude/commands/*` | Command docs from templates |
| `.claude/WORKER-ROLE.md` | Worker agent role definition |
| `.claude/SECURITY-CHECKLIST.md` | Security checklist from profile |
| `.claude/toolkit-version` | Regenerated with current commit/date |
| `.codex/skills` | Symlink to `.claude/skills` |

### Marker-Based Merge

| File | Behavior |
|------|----------|
| `CLAUDE.md` | Content between `<!-- TOOLKIT:BEGIN -->` / `<!-- TOOLKIT:END -->` is replaced; user content outside markers is preserved |

### Create-If-Missing (never overwritten)

| File | Description |
|------|-------------|
| `WORKSPACE.md` | Workspace description (workspace mode only) |
| `.claude/docs/QUICK-REFERENCE.md` | Command reference |
| `.claude/docs/FAQ-AGENTS.md` | Common questions |
| `.claude/docs/CODEBASE-MAP.md` | Codebase overview |

## CLAUDE.md Marker Merge

The toolkit uses HTML comment markers to manage its section of `CLAUDE.md`:

| Scenario | Behavior |
|----------|----------|
| File doesn't exist | Created with markers |
| File has markers | Content between markers replaced, rest preserved |
| File exists, no markers, `--update` | Toolkit section prepended |
| File exists, no markers, no `--update` | Skipped |

## When to Use

- After pulling toolkit updates that include template changes
- When validation shows outdated skills
- After fixing a bug in a skill template
- To ensure all toolkit files are present

## Configuration

The skill looks for the toolkit source in this order:

1. `TOOLKIT_SOURCE` variable in `workspace-config`
2. `~/claude-workflow-toolkit` directory
3. Parent of the skills directory (for embedded installations)

## Example

```bash
$ /sync-skills

========================================
Syncing Toolkit
========================================
Toolkit: /home/user/claude-workflow-toolkit
Target:  /home/user/workspaces/myproject

Installing skills...
  Profile: default
  Target:  /home/user/workspaces/myproject

  ✓ check-reviews
  ✓ claim-issue
  ✓ worker
  ...

Installing toolkit files...
  ✓ .claude/WORKER-ROLE.md
  ✓ .claude/SECURITY-CHECKLIST.md
  ✓ .claude/toolkit-version
  ✓ .codex/skills (symlink exists)

Installing CLAUDE.md...
  ✓ CLAUDE.md (markers updated, user content preserved)

Installing docs (create-if-missing)...
  ⊘ .claude/docs/QUICK-REFERENCE.md (exists, preserved)
  ✓ .claude/docs/FAQ-AGENTS.md
  ⊘ WORKSPACE.md (exists, preserved)

Done! 10 skill(s) processed

Toolkit synchronized!
```

## Related

| Skill | Relationship |
|-------|--------------|
| `/worker` | May show validation warnings if skills outdated |
| `validate-toolkit.sh` | Checks for outdated skills |
| `install-skill.sh` | Called internally with `--full` flag |
